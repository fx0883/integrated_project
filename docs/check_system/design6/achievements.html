<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>成就系统 - 自律打卡</title>
    <link href="https://cdn.jsdelivr.net/npm/tailwindcss@2.2.19/dist/tailwind.min.css" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
    <style>
        :root {
            /* 扁平化设计的颜色变量 */
            --primary-color: #4CD964;
            --primary-dark: #009688;
            --primary-light: #E0F2F1;
            --accent-color: #FF9800;
            --accent-light: #FFE0B2;
            --text-primary: #212121;
            --text-secondary: #757575;
            --divider-color: #BDBDBD;
            --background-color: #F8F9FA;
            --error-color: #F44336;
            --success-color: #4CAF50;
            --warning-color: #FFC107;
        }
        
        body {
            font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, sans-serif;
            color: var(--text-primary);
            background-color: var(--background-color);
            margin: 0;
            padding: 0;
            -webkit-font-smoothing: antialiased;
            -moz-osx-font-smoothing: grayscale;
        }
        
        /* 基础布局 */
        .app-container {
            max-width: 500px;
            margin: 0 auto;
            background-color: white;
            border: 1px solid var(--divider-color);
        }
        
        .status-bar {
            background-color: var(--primary-color);
            color: white;
            padding: 10px 16px;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }
        
        .status-bar .time {
            font-size: 14px;
            font-weight: 500;
        }
        
        .status-bar .icons {
            display: flex;
            align-items: center;
            gap: 12px;
            font-size: 14px;
        }
        
        .nav-bar {
            background-color: var(--primary-color);
            color: white;
            padding: 16px;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }
        
        .nav-bar h1 {
            font-size: 18px;
            font-weight: 600;
            margin: 0;
        }
        
        .nav-back {
            font-size: 18px;
            color: white;
            cursor: pointer;
        }
        
        .page-content {
            padding: 16px;
        }
        
        /* 成就系统样式 */
        .achievement-overview {
            background-color: white;
            border: 1px solid var(--divider-color);
            border-radius: 4px;
            margin-bottom: 20px;
            padding: 20px;
            text-align: center;
        }
        
        .achievement-stats {
            display: flex;
            justify-content: space-between;
            margin-top: 16px;
        }
        
        .stat-item {
            flex: 1;
            text-align: center;
        }
        
        .stat-value {
            font-size: 24px;
            font-weight: 700;
            color: var(--primary-color);
            margin-bottom: 4px;
        }
        
        .stat-label {
            font-size: 12px;
            color: var(--text-secondary);
        }
        
        .progress-container {
            margin-top: 16px;
        }
        
        .progress-bar {
            width: 100%;
            height: 6px;
            background-color: var(--divider-color);
            border-radius: 3px;
            overflow: hidden;
            margin-bottom: 8px;
        }
        
        .progress-fill {
            height: 100%;
            background-color: var(--primary-color);
            border-radius: 3px;
        }
        
        .progress-text {
            font-size: 12px;
            color: var(--text-secondary);
            text-align: center;
        }
        
        /* 成就类别 */
        .category-tabs {
            display: flex;
            background-color: white;
            border: 1px solid var(--divider-color);
            border-radius: 4px;
            margin-bottom: 20px;
            overflow: hidden;
        }
        
        .category-tab {
            flex: 1;
            padding: 10px 0;
            text-align: center;
            font-size: 14px;
            color: var(--text-secondary);
            cursor: pointer;
            border-bottom: 2px solid transparent;
        }
        
        .category-tab.active {
            color: var(--primary-color);
            border-bottom-color: var(--primary-color);
        }
        
        /* 成就卡片 */
        .achievement-section {
            margin-bottom: 20px;
        }
        
        .section-title {
            font-size: 16px;
            font-weight: 600;
            color: var(--text-primary);
            margin-bottom: 12px;
            display: flex;
            align-items: center;
        }
        
        .section-title i {
            margin-right: 8px;
            color: var(--primary-color);
        }
        
        .achievements-grid {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 12px;
        }
        
        .achievement-card {
            background-color: white;
            border: 1px solid var(--divider-color);
            border-radius: 4px;
            padding: 16px;
            transition: transform 0.2s ease;
        }
        
        .achievement-card:hover {
            transform: translateY(-2px);
        }
        
        .achievement-icon {
            width: 60px;
            height: 60px;
            border-radius: 30px;
            background-color: var(--primary-light);
            color: var(--primary-color);
            display: flex;
            align-items: center;
            justify-content: center;
            margin: 0 auto 12px;
            font-size: 24px;
        }
        
        .achievement-icon.locked {
            background-color: #f5f5f5;
            color: var(--divider-color);
        }
        
        .achievement-gold {
            background-color: #FFF8E1;
            color: #FFC107;
        }
        
        .achievement-silver {
            background-color: #F5F5F5;
            color: #9E9E9E;
        }
        
        .achievement-bronze {
            background-color: #FBE9E7;
            color: #FF5722;
        }
        
        .achievement-info {
            text-align: center;
        }
        
        .achievement-title {
            font-size: 14px;
            font-weight: 600;
            color: var(--text-primary);
            margin-bottom: 4px;
        }
        
        .achievement-desc {
            font-size: 12px;
            color: var(--text-secondary);
            margin-bottom: 8px;
            height: 32px;
            overflow: hidden;
        }
        
        .achievement-progress {
            width: 100%;
            height: 4px;
            background-color: var(--divider-color);
            border-radius: 2px;
            overflow: hidden;
            margin-bottom: 8px;
        }
        
        .achievement-progress-fill {
            height: 100%;
            background-color: var(--primary-color);
            border-radius: 2px;
        }
        
        .achievement-status {
            font-size: 12px;
            color: var(--primary-color);
        }
        
        .achievement-status.locked {
            color: var(--text-secondary);
        }
        
        /* 底部标签栏 */
        .tab-bar {
            display: flex;
            border-top: 1px solid var(--divider-color);
            background-color: white;
            position: sticky;
            bottom: 0;
            width: 100%;
        }
        
        .tab {
            flex: 1;
            display: flex;
            flex-direction: column;
            align-items: center;
            padding: 8px 0;
            color: var(--text-secondary);
            text-decoration: none;
        }
        
        .tab.active {
            color: var(--primary-color);
        }
        
        .tab-icon {
            font-size: 20px;
            margin-bottom: 4px;
        }
        
        .tab-text {
            font-size: 12px;
        }
        
        /* 成就详情模态框 */
        .achievement-modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0, 0, 0, 0.5);
            z-index: 1000;
            justify-content: center;
            align-items: center;
        }
        
        .modal-content {
            background-color: white;
            border-radius: 4px;
            max-width: 320px;
            width: 90%;
            padding: 24px;
            position: relative;
        }
        
        .modal-close {
            position: absolute;
            top: 16px;
            right: 16px;
            font-size: 20px;
            color: var(--text-secondary);
            cursor: pointer;
        }
        
        .modal-icon {
            width: 80px;
            height: 80px;
            border-radius: 40px;
            display: flex;
            align-items: center;
            justify-content: center;
            margin: 0 auto 20px;
            font-size: 32px;
        }
        
        .modal-title {
            font-size: 18px;
            font-weight: 600;
            text-align: center;
            margin-bottom: 12px;
            color: var(--text-primary);
        }
        
        .modal-desc {
            font-size: 14px;
            color: var(--text-secondary);
            text-align: center;
            margin-bottom: 16px;
            line-height: 1.5;
        }
        
        .modal-date {
            font-size: 12px;
            color: var(--text-primary);
            text-align: center;
            margin-bottom: 20px;
        }
        
        .modal-progress {
            margin-bottom: 16px;
        }
        
        .progress-info {
            display: flex;
            justify-content: space-between;
            font-size: 12px;
            color: var(--text-secondary);
            margin-bottom: 8px;
        }
        
        .modal-btn {
            background-color: var(--primary-color);
            color: white;
            border: none;
            padding: 10px 0;
            border-radius: 4px;
            font-size: 14px;
            font-weight: 500;
            width: 100%;
            cursor: pointer;
        }
        
        .modal-btn.disabled {
            background-color: var(--divider-color);
            cursor: not-allowed;
        }
    </style>
</head>
<body>
    <div class="app-container">
        <!-- 状态栏 -->
        <div class="status-bar">
            <div class="time">9:41</div>
            <div class="icons">
                <i class="fas fa-signal"></i>
                <i class="fas fa-wifi"></i>
                <i class="fas fa-battery-full"></i>
            </div>
        </div>
        
        <!-- 导航栏 -->
        <div class="nav-bar">
            <div class="nav-back" onclick="history.back()">
                <i class="fas fa-arrow-left"></i>
            </div>
            <h1>成就系统</h1>
            <div style="width: 24px;"></div>
        </div>
        
        <!-- 页面内容 -->
        <div class="page-content">
            <!-- 成就概览 -->
            <div class="achievement-overview">
                <div class="stat-value">60%</div>
                <div class="stat-label">成就完成度</div>
                
                <div class="progress-container">
                    <div class="progress-bar">
                        <div class="progress-fill" style="width: 60%;"></div>
                    </div>
                    <div class="progress-text">已获得 12 个成就，共 20 个成就</div>
                </div>
                
                <div class="achievement-stats">
                    <div class="stat-item">
                        <div class="stat-value">4</div>
                        <div class="stat-label">金牌</div>
                    </div>
                    <div class="stat-item">
                        <div class="stat-value">5</div>
                        <div class="stat-label">银牌</div>
                    </div>
                    <div class="stat-item">
                        <div class="stat-value">3</div>
                        <div class="stat-label">铜牌</div>
                    </div>
                </div>
            </div>
            
            <!-- 成就分类 -->
            <div class="category-tabs">
                <div class="category-tab active" data-category="all">全部</div>
                <div class="category-tab" data-category="daily">日常</div>
                <div class="category-tab" data-category="milestone">里程碑</div>
                <div class="category-tab" data-category="special">特殊</div>
            </div>
            
            <!-- 已获得成就 -->
            <div class="achievement-section" id="unlocked-section">
                <div class="section-title">
                    <i class="fas fa-unlock"></i>
                    已获得成就
                </div>
                <div class="achievements-grid">
                    <!-- 金牌成就 - 连续打卡30天 -->
                    <div class="achievement-card" data-achievement="achievement-1">
                        <div class="achievement-icon achievement-gold">
                            <i class="fas fa-fire"></i>
                        </div>
                        <div class="achievement-info">
                            <div class="achievement-title">坚持不懈</div>
                            <div class="achievement-desc">连续打卡30天</div>
                            <div class="achievement-progress">
                                <div class="achievement-progress-fill" style="width: 100%;"></div>
                            </div>
                            <div class="achievement-status">已获得: 2023-09-10</div>
                        </div>
                    </div>
                    
                    <!-- 金牌成就 - 完成100个任务 -->
                    <div class="achievement-card" data-achievement="achievement-2">
                        <div class="achievement-icon achievement-gold">
                            <i class="fas fa-tasks"></i>
                        </div>
                        <div class="achievement-info">
                            <div class="achievement-title">任务达人</div>
                            <div class="achievement-desc">完成100个任务</div>
                            <div class="achievement-progress">
                                <div class="achievement-progress-fill" style="width: 100%;"></div>
                            </div>
                            <div class="achievement-status">已获得: 2023-08-15</div>
                        </div>
                    </div>
                    
                    <!-- 银牌成就 - 单日完成10个任务 -->
                    <div class="achievement-card" data-achievement="achievement-3">
                        <div class="achievement-icon achievement-silver">
                            <i class="fas fa-bolt"></i>
                        </div>
                        <div class="achievement-info">
                            <div class="achievement-title">高效能</div>
                            <div class="achievement-desc">单日完成10个任务</div>
                            <div class="achievement-progress">
                                <div class="achievement-progress-fill" style="width: 100%;"></div>
                            </div>
                            <div class="achievement-status">已获得: 2023-07-22</div>
                        </div>
                    </div>
                    
                    <!-- 银牌成就 - 累计打卡50天 -->
                    <div class="achievement-card" data-achievement="achievement-4">
                        <div class="achievement-icon achievement-silver">
                            <i class="fas fa-calendar-check"></i>
                        </div>
                        <div class="achievement-info">
                            <div class="achievement-title">习惯养成</div>
                            <div class="achievement-desc">累计打卡50天</div>
                            <div class="achievement-progress">
                                <div class="achievement-progress-fill" style="width: 100%;"></div>
                            </div>
                            <div class="achievement-status">已获得: 2023-06-30</div>
                        </div>
                    </div>
                    
                    <!-- 铜牌成就 - 早起打卡7天 -->
                    <div class="achievement-card" data-achievement="achievement-5">
                        <div class="achievement-icon achievement-bronze">
                            <i class="fas fa-sun"></i>
                        </div>
                        <div class="achievement-info">
                            <div class="achievement-title">早起达人</div>
                            <div class="achievement-desc">早起打卡7天</div>
                            <div class="achievement-progress">
                                <div class="achievement-progress-fill" style="width: 100%;"></div>
                            </div>
                            <div class="achievement-status">已获得: 2023-05-15</div>
                        </div>
                    </div>
                    
                    <!-- 铜牌成就 - 完成第一个任务 -->
                    <div class="achievement-card" data-achievement="achievement-6">
                        <div class="achievement-icon achievement-bronze">
                            <i class="fas fa-flag-checkered"></i>
                        </div>
                        <div class="achievement-info">
                            <div class="achievement-title">第一步</div>
                            <div class="achievement-desc">完成第一个任务</div>
                            <div class="achievement-progress">
                                <div class="achievement-progress-fill" style="width: 100%;"></div>
                            </div>
                            <div class="achievement-status">已获得: 2023-05-01</div>
                        </div>
                    </div>
                </div>
            </div>
            
            <!-- 未获得成就 -->
            <div class="achievement-section" id="locked-section">
                <div class="section-title">
                    <i class="fas fa-lock"></i>
                    未获得成就
                </div>
                <div class="achievements-grid">
                    <!-- 金牌成就 - 连续打卡100天 -->
                    <div class="achievement-card" data-achievement="achievement-7">
                        <div class="achievement-icon achievement-gold locked">
                            <i class="fas fa-fire"></i>
                        </div>
                        <div class="achievement-info">
                            <div class="achievement-title">持之以恒</div>
                            <div class="achievement-desc">连续打卡100天</div>
                            <div class="achievement-progress">
                                <div class="achievement-progress-fill" style="width: 60%;"></div>
                            </div>
                            <div class="achievement-status locked">进度: 60/100</div>
                        </div>
                    </div>
                    
                    <!-- 金牌成就 - 完成所有类型的任务 -->
                    <div class="achievement-card" data-achievement="achievement-8">
                        <div class="achievement-icon achievement-gold locked">
                            <i class="fas fa-star"></i>
                        </div>
                        <div class="achievement-info">
                            <div class="achievement-title">全能达人</div>
                            <div class="achievement-desc">完成所有类型的任务</div>
                            <div class="achievement-progress">
                                <div class="achievement-progress-fill" style="width: 80%;"></div>
                            </div>
                            <div class="achievement-status locked">进度: 8/10</div>
                        </div>
                    </div>
                    
                    <!-- 银牌成就 - 参与5次挑战 -->
                    <div class="achievement-card" data-achievement="achievement-9">
                        <div class="achievement-icon achievement-silver locked">
                            <i class="fas fa-trophy"></i>
                        </div>
                        <div class="achievement-info">
                            <div class="achievement-title">挑战达人</div>
                            <div class="achievement-desc">参与5次挑战</div>
                            <div class="achievement-progress">
                                <div class="achievement-progress-fill" style="width: 40%;"></div>
                            </div>
                            <div class="achievement-status locked">进度: 2/5</div>
                        </div>
                    </div>
                    
                    <!-- 银牌成就 - 每周7天都完成任务 -->
                    <div class="achievement-card" data-achievement="achievement-10">
                        <div class="achievement-icon achievement-silver locked">
                            <i class="fas fa-calendar-week"></i>
                        </div>
                        <div class="achievement-info">
                            <div class="achievement-title">完美周</div>
                            <div class="achievement-desc">每周7天都完成任务</div>
                            <div class="achievement-progress">
                                <div class="achievement-progress-fill" style="width: 85%;"></div>
                            </div>
                            <div class="achievement-status locked">进度: 6/7</div>
                        </div>
                    </div>
                    
                    <!-- 铜牌成就 - 晚上打卡7天 -->
                    <div class="achievement-card" data-achievement="achievement-11">
                        <div class="achievement-icon achievement-bronze locked">
                            <i class="fas fa-moon"></i>
                        </div>
                        <div class="achievement-info">
                            <div class="achievement-title">夜猫子</div>
                            <div class="achievement-desc">晚上10点后打卡7天</div>
                            <div class="achievement-progress">
                                <div class="achievement-progress-fill" style="width: 30%;"></div>
                            </div>
                            <div class="achievement-status locked">进度: 3/7</div>
                        </div>
                    </div>
                    
                    <!-- 铜牌成就 - 创建10个任务 -->
                    <div class="achievement-card" data-achievement="achievement-12">
                        <div class="achievement-icon achievement-bronze locked">
                            <i class="fas fa-plus-circle"></i>
                        </div>
                        <div class="achievement-info">
                            <div class="achievement-title">规划达人</div>
                            <div class="achievement-desc">创建10个任务</div>
                            <div class="achievement-progress">
                                <div class="achievement-progress-fill" style="width: 90%;"></div>
                            </div>
                            <div class="achievement-status locked">进度: 9/10</div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        
        <!-- 底部标签栏 -->
        <div class="tab-bar">
            <a href="dashboard.html" class="tab">
                <div class="tab-icon">
                    <i class="fas fa-home"></i>
                </div>
                <div class="tab-text">首页</div>
            </a>
            <a href="tasks.html" class="tab">
                <div class="tab-icon">
                    <i class="fas fa-tasks"></i>
                </div>
                <div class="tab-text">任务</div>
            </a>
            <a href="records.html" class="tab">
                <div class="tab-icon">
                    <i class="fas fa-calendar-check"></i>
                </div>
                <div class="tab-text">记录</div>
            </a>
            <a href="statistics.html" class="tab">
                <div class="tab-icon">
                    <i class="fas fa-chart-pie"></i>
                </div>
                <div class="tab-text">统计</div>
            </a>
            <a href="profile.html" class="tab active">
                <div class="tab-icon">
                    <i class="fas fa-user"></i>
                </div>
                <div class="tab-text">我的</div>
            </a>
        </div>
    </div>
    
    <!-- 成就详情模态框 -->
    <div class="achievement-modal" id="achievement-modal">
        <div class="modal-content">
            <div class="modal-close" id="modal-close">
                <i class="fas fa-times"></i>
            </div>
            
            <div class="modal-icon achievement-gold" id="modal-icon">
                <i class="fas fa-fire" id="modal-icon-type"></i>
            </div>
            
            <div class="modal-title" id="modal-title">坚持不懈</div>
            <div class="modal-desc" id="modal-desc">连续30天打卡，展现了你优秀的自律能力和坚持不懈的精神！</div>
            
            <div class="modal-date" id="modal-date">获得于: 2023-09-10</div>
            
            <div class="modal-progress" id="modal-progress">
                <div class="progress-info">
                    <span id="progress-current">30</span>
                    <span id="progress-total">/ 30</span>
                </div>
                <div class="progress-bar">
                    <div class="progress-fill" id="modal-progress-fill" style="width: 100%;"></div>
                </div>
            </div>
            
            <button class="modal-btn" id="modal-btn">分享成就</button>
        </div>
    </div>
    
    <script>
        // 获取当前时间并显示在状态栏
        function updateStatusBarTime() {
            const now = new Date();
            const hours = now.getHours().toString().padStart(2, '0');
            const minutes = now.getMinutes().toString().padStart(2, '0');
            document.querySelector('.time').textContent = `${hours}:${minutes}`;
        }
        updateStatusBarTime();
        setInterval(updateStatusBarTime, 60000);
        
        // 成就分类标签切换
        const categoryTabs = document.querySelectorAll('.category-tab');
        
        categoryTabs.forEach(tab => {
            tab.addEventListener('click', () => {
                // 移除所有标签的激活状态
                categoryTabs.forEach(t => t.classList.remove('active'));
                
                // 添加当前标签的激活状态
                tab.classList.add('active');
                
                // 获取当前分类
                const category = tab.getAttribute('data-category');
                
                // 输出日志，方便调试
                console.log('切换成就分类:', category);
                
                // 这里可以根据分类过滤成就列表
                if (category === 'all') {
                    // 显示所有成就
                    document.querySelectorAll('.achievement-card').forEach(card => {
                        card.style.display = 'block';
                    });
                } else {
                    // 根据分类筛选成就（这里仅做演示，实际应用需要为每个成就添加分类属性）
                    filterAchievementsByCategory(category);
                }
            });
        });
        
        // 模拟按分类筛选成就
        function filterAchievementsByCategory(category) {
            // 这里假设成就卡片有data-category属性
            // 实际应用中需要为每个成就卡片添加对应的分类属性
            alert(`筛选${category}分类的成就`);
            
            // 模拟筛选效果，实际应用需要根据数据进行筛选
            const achievementCards = document.querySelectorAll('.achievement-card');
            
            // 随机显示或隐藏成就卡片，模拟筛选效果
            achievementCards.forEach(card => {
                const random = Math.random();
                if (category === 'daily') {
                    card.style.display = random > 0.3 ? 'block' : 'none';
                } else if (category === 'milestone') {
                    card.style.display = random > 0.6 ? 'block' : 'none';
                } else if (category === 'special') {
                    card.style.display = random > 0.7 ? 'block' : 'none';
                }
            });
        }
        
        // 成就卡片点击显示详情
        const achievementCards = document.querySelectorAll('.achievement-card');
        const achievementModal = document.getElementById('achievement-modal');
        const modalClose = document.getElementById('modal-close');
        
        achievementCards.forEach(card => {
            card.addEventListener('click', () => {
                // 获取成就ID
                const achievementId = card.getAttribute('data-achievement');
                
                // 获取成就详情
                const title = card.querySelector('.achievement-title').textContent;
                const desc = card.querySelector('.achievement-desc').textContent;
                const isLocked = card.querySelector('.achievement-icon').classList.contains('locked');
                const progressText = card.querySelector('.achievement-status').textContent;
                const progressPercent = card.querySelector('.achievement-progress-fill').style.width;
                
                // 设置模态框内容
                document.getElementById('modal-title').textContent = title;
                
                // 设置更详细的描述
                let fullDesc = '';
                if (title === '坚持不懈') {
                    fullDesc = '连续30天打卡，展现了你优秀的自律能力和坚持不懈的精神！';
                } else if (title === '任务达人') {
                    fullDesc = '完成100个任务，你的高效率和执行力令人佩服！';
                } else if (title === '高效能') {
                    fullDesc = '单日完成10个任务，你的专注力和效率令人惊叹！';
                } else if (title === '习惯养成') {
                    fullDesc = '累计打卡50天，好习惯正在形成，继续坚持！';
                } else if (title === '早起达人') {
                    fullDesc = '连续7天早起打卡，早起是高效一天的开始！';
                } else if (title === '第一步') {
                    fullDesc = '完成第一个任务，万事开头难，你已经迈出了重要的第一步！';
                } else if (title === '持之以恒') {
                    fullDesc = '连续100天打卡，这需要惊人的毅力和自律能力！';
                } else if (title === '全能达人') {
                    fullDesc = '完成所有类型的任务，你已经是全面发展的自律达人！';
                } else if (title === '挑战达人') {
                    fullDesc = '参与5次挑战，不断突破自我，挑战极限！';
                } else if (title === '完美周') {
                    fullDesc = '每周7天都完成任务，一周的完美收官！';
                } else if (title === '夜猫子') {
                    fullDesc = '晚上10点后打卡7天，夜深人静更容易专注！';
                } else if (title === '规划达人') {
                    fullDesc = '创建10个任务，良好的规划是成功的一半！';
                } else {
                    fullDesc = desc;
                }
                
                document.getElementById('modal-desc').textContent = fullDesc;
                
                // 设置图标样式
                const modalIcon = document.getElementById('modal-icon');
                const iconType = card.querySelector('.achievement-icon i').classList[1];
                
                modalIcon.className = 'modal-icon';
                if (card.querySelector('.achievement-icon').classList.contains('achievement-gold')) {
                    modalIcon.classList.add('achievement-gold');
                } else if (card.querySelector('.achievement-icon').classList.contains('achievement-silver')) {
                    modalIcon.classList.add('achievement-silver');
                } else if (card.querySelector('.achievement-icon').classList.contains('achievement-bronze')) {
                    modalIcon.classList.add('achievement-bronze');
                }
                
                if (isLocked) {
                    modalIcon.classList.add('locked');
                }
                
                // 设置图标
                document.getElementById('modal-icon-type').className = 'fas ' + iconType;
                
                // 设置进度
                if (isLocked) {
                    // 提取进度数据，格式如 "进度: 60/100"
                    const progressMatch = progressText.match(/(\d+)\/(\d+)/);
                    if (progressMatch) {
                        const current = progressMatch[1];
                        const total = progressMatch[2];
                        
                        document.getElementById('progress-current').textContent = current;
                        document.getElementById('progress-total').textContent = '/ ' + total;
                        document.getElementById('modal-progress-fill').style.width = progressPercent;
                        document.getElementById('modal-date').style.display = 'none';
                        document.getElementById('modal-progress').style.display = 'block';
                        
                        // 更新按钮文本和样式
                        const modalBtn = document.getElementById('modal-btn');
                        modalBtn.textContent = '继续努力';
                        modalBtn.classList.add('disabled');
                    }
                } else {
                    // 已获得的成就
                    const dateMatch = progressText.match(/已获得: (.*)/);
                    if (dateMatch) {
                        document.getElementById('modal-date').textContent = '获得于: ' + dateMatch[1];
                        document.getElementById('modal-date').style.display = 'block';
                        document.getElementById('modal-progress').style.display = 'none';
                        
                        // 更新按钮文本和样式
                        const modalBtn = document.getElementById('modal-btn');
                        modalBtn.textContent = '分享成就';
                        modalBtn.classList.remove('disabled');
                    }
                }
                
                // 显示模态框
                achievementModal.style.display = 'flex';
                
                // 输出日志，方便调试
                console.log('查看成就详情:', {
                    id: achievementId,
                    title,
                    desc,
                    isLocked,
                    progressText,
                    progressPercent
                });
            });
        });
        
        // 关闭模态框
        modalClose.addEventListener('click', () => {
            achievementModal.style.display = 'none';
        });
        
        // 点击模态框外部区域关闭模态框
        achievementModal.addEventListener('click', (e) => {
            if (e.target === achievementModal) {
                achievementModal.style.display = 'none';
            }
        });
        
        // 分享或继续努力按钮点击事件
        document.getElementById('modal-btn').addEventListener('click', function() {
            if (this.classList.contains('disabled')) {
                alert('继续努力，你离获得这个成就越来越近了！');
            } else {
                alert('分享成功！你的朋友们会为你的成就感到骄傲！');
            }
        });
    </script>
</body>
</html> 
</html> 